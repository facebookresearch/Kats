(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4957],{3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return s},kt:function(){return u}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var d=r.createContext({}),l=function(e){var n=r.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},s=function(e){var n=l(e.components);return r.createElement(d.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,d=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),m=l(t),u=a,f=m["".concat(d,".").concat(u)]||m[u]||c[u]||i;return t?r.createElement(f,o(o({ref:n},s),{},{components:t})):r.createElement(f,o({ref:n},s))}));function u(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=m;var p={};for(var d in n)hasOwnProperty.call(n,d)&&(p[d]=n[d]);p.originalType=e,p.mdxType="string"==typeof e?e:a,o[1]=p;for(var l=2;l<i;l++)o[l]=t[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},553:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return p},metadata:function(){return d},toc:function(){return l},default:function(){return c}});var r=t(2122),a=t(9756),i=(t(7294),t(3905)),o=["components"],p={id:"ray_example",title:"Ray example",sidebar_label:"Ray example"},d={unversionedId:"advanced/ray_example",id:"version-0.11/advanced/ray_example",isDocsHomePage:!1,title:"Ray example",description:"Ray is a framework for building and running distributed applications.",source:"@site/versioned_docs/version-0.11/advanced/ray_example.md",sourceDirName:"advanced",slug:"/advanced/ray_example",permalink:"/docs/0.11/advanced/ray_example",editUrl:"https://github.com/facebookresearch/kats/edit/master/website/versioned_docs/version-0.11/advanced/ray_example.md",version:"0.11",lastUpdatedBy:"Omry Yadan",lastUpdatedAt:1597766824,formattedLastUpdatedAt:"8/18/2020",sidebar_label:"Ray example",frontMatter:{id:"ray_example",title:"Ray example",sidebar_label:"Ray example"},sidebar:"version-0.11/docs",previous:{title:"Compose API",permalink:"/docs/0.11/advanced/compose_api"},next:{title:"Contributing",permalink:"/docs/0.11/development/contributing"}},l=[],s={toc:l};function c(e){var n=e.components,t=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/ray-project/ray"},"Ray")," is a framework for building and running distributed applications.\nHydra can be used with Ray to configure Ray itself as well as complex remote calls through the compose API.\nA future plugin will enable launching to Ray clusters directly from the command line."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'import hydra\nfrom hydra.experimental import compose\nimport ray\nimport time\nfrom omegaconf import OmegaConf\n\n@ray.remote\ndef train(overrides, cfg):\n    print(OmegaConf.to_yaml(cfg))\n    time.sleep(5)\n    return overrides, 0.9\n\n\n@hydra.main(config_path="conf/config.yaml")\ndef main(cfg):\n    ray.init(**cfg.ray.init)\n\n    results = []\n    for model in ["alexnet", "resnet"]:\n        for dataset in ["cifar10", "imagenet"]:\n            overrides = [f"dataset={dataset}", f"model={model}"]\n            run_cfg = compose(overrides=overrides)\n            ret = train.remote(overrides, run_cfg)\n            results.append(ret)\n\n    for overrides, score in ray.get(results):\n        print(f"Result from {overrides} : {score}")\n\n\nif __name__ == "__main__":\n    main()\n')),(0,i.kt)("p",null,"Output:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"(pid=11571) dataset:\n(pid=11571)   name: cifar10\n(pid=11571)   path: /datasets/cifar10\n(pid=11571) model:\n(pid=11571)   num_layers: 7\n(pid=11571)   type: alexnet\n(pid=11571) \n(pid=11572) dataset:\n(pid=11572)   name: imagenet\n(pid=11572)   path: /datasets/imagenet\n(pid=11572) model:\n(pid=11572)   num_layers: 7\n(pid=11572)   type: alexnet\n(pid=11572) \n(pid=11573) dataset:\n(pid=11573)   name: cifar10\n(pid=11573)   path: /datasets/cifar10\n(pid=11573) model:\n(pid=11573)   num_layers: 50\n(pid=11573)   type: resnet\n(pid=11573)   width: 10\n(pid=11573) \n(pid=11574) dataset:\n(pid=11574)   name: imagenet\n(pid=11574)   path: /datasets/imagenet\n(pid=11574) model:\n(pid=11574)   num_layers: 50\n(pid=11574)   type: resnet\n(pid=11574)   width: 10\n(pid=11574) \nResult from ['dataset=cifar10', 'model=alexnet'] : 0.9\nResult from ['dataset=imagenet', 'model=alexnet'] : 0.9\nResult from ['dataset=cifar10', 'model=resnet'] : 0.9\nResult from ['dataset=imagenet', 'model=resnet'] : 0.9\n")))}c.isMDXComponent=!0}}]);